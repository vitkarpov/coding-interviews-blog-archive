Jump Game VI
============

Jan 18, 2021 ¬∑ 5 min read

–î–∞–Ω –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª `nums` –∏ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ `k`.

–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –º–∞—Å—Å–∏–≤–∞. –ó–∞ –æ–¥–∏–Ω —Ö–æ–¥ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä—ã–∂–æ–∫ –Ω–∞ –Ω–µ –±–æ–ª–µ–µ —á–µ–º `k` —à–∞–≥–æ–≤ –≤–ø–µ—Ä—ë–¥ (–Ω–µ –≤—ã—Ö–æ–¥—è –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É –º–∞—Å—Å–∏–≤–∞). –ó–∞–¥–∞—á–∞ –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –∫–æ–Ω—Ü–∞ –º–∞—Å—Å–∏–≤–∞ —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π –º–∞—Å—Å–∏–≤–∞.

–ü—Ä–∏–º–µ—Ä: `nums = [1,-1,-2,4,-7,3], k = 2`

![](/images/jump-game-vi--ex.jpg)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ –æ—Ç–º–µ—á–µ–Ω—ã ¬´–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ¬ª –ø—Ä—ã–∂–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–µ—Å—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤.

[–ó–∞–¥–∞—á–∞ –Ω–∞ LeetCode](https://leetcode.com/problems/jump-game-vi/).

–†–µ—à–µ–Ω–∏–µ¬†[#](#—Ä–µ—à–µ–Ω–∏–µ)
---------------------

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É ‚Äî –∂–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º. –¢–æ –µ—Å—Ç—å –∏—Å–∫–∞—Ç—å –º–∞–∫—Å–∏–º—É–º —Å—Ä–µ–¥–∏ –ø–µ—Ä–≤—ã—Ö k —á–∏—Å–µ–ª, –¥–µ–ª–∞—Ç—å –ø—Ä—ã–∂–æ–∫ —Ç—É–¥–∞ (–≤–∑—è–≤ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—É–º–º—É –æ—á–∫–æ–≤), –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ–∏—Å–∫ —Å –Ω–æ–≤–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞.

–ù–∞ LeetCode –ø–µ—Ä–≤—ã–µ —Ç–µ—Å—Ç—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–¥–∞—á–∏ —É–∂–µ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–≠—Ç–æ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–∂–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø ¬´—Å–ø–µ—Ä–≤–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –∞–ª–≥–æ—Ä–∏—Ç–º, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–∏—Å–∞—Ç—å –∫–æ–¥¬ª.

–ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ —Å—Ç–æ–∏—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç—Ä-–ø—Ä–∏–º–µ—Ä –¥–ª—è –∂–∞–¥–∏–Ω–∫–∏ –∏ —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω–µ —Å—Ç–æ–∏—Ç –∏–¥—Ç–∏ —ç—Ç–∏–º –ø—É—Ç—ë–º. –•–æ—Ä–æ—à–∏–π –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä –¥–∞—Å—Ç –∫–æ–Ω—Ç—Ä-–ø—Ä–∏–º–µ—Ä —Å–∞–º, –µ—Å–ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç –≤—Å—ë –∂–µ —Ä–µ—à–∞–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –∂–∞–¥–∏–Ω–∫—É, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è.

–ò—Ç–∞–∫, –Ω–∞–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var maxResult = function(nums, k) {
      const n = nums.length;
      let sum = nums[0];
      let i = 0;
    
      while (i < n - 1) {
        // –∏—â–µ–º –º–∞–∫—Å–∏–º—É–º —Å—Ä–µ–¥–∏ —Å–ª–µ–¥—É—é—â–∏—Ö k —á–∏—Å–µ–ª
        const [value, j] = findMaxInRange(nums, i + 1, Math.min(i + k, n - 1));
        // —Ä–µ—à–∞–µ–º, —á—Ç–æ –±—É–¥–µ–º –ø—Ä—ã–≥–∞—Ç—å –Ω–∞ –∏–Ω–¥–µ–∫—Å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—á–∫–æ–≤,
        // –Ω–∞—á–∏–Ω–∞—è –ø–æ–∏—Å–∫ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Å —ç—Ç–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
        i = j;
        sum += value;
      }
      return sum;
    };
    
    function findMaxInRange(nums, start, end) {
      let maxValue = nums[start];
      let maxIndex = start;
    
      for (let i = start + 1; i <= end; i++) {
        if (nums[i] > maxValue) {
          maxValue = nums[i];
          maxIndex = i;
        }
      }
      return [maxValue, maxIndex];
    }
    

![](/images/jump-game-vi--greedy.jpg)

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –∫–æ–Ω—Ç—Ä-–ø—Ä–∏–º–µ—Ä.

![](/images/jump-game-vi--greedy-fail.jpg)

–ö–∞–∫ –≤–∏–¥–Ω–æ, –æ—à–∏–±–∫–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å –ª–µ–∂–∏—Ç —á–µ—Ä–µ–∑ -2, –∞ –Ω–µ -1. –í –ø–µ—Ä–≤–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ –∏–∑ —Ç—Ä—ë—Ö —á–∏—Å–µ–ª -1 –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª—å—à–∏–º, –ø–æ—ç—Ç–æ–º—É –∂–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –±–µ—Ä—ë—Ç –µ–≥–æ, –∞ –Ω–µ -2.

–í —á–µ–º –≥–ª–∞–≤–Ω–∞—è –æ—à–∏–±–∫–∞ –Ω–∞–∏–≤–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞? –û–Ω –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–∞–ª—å—à–µ. –¢–æ –µ—Å—Ç—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞—Ç—å -2, —Ç–æ —Å—Ä–µ–¥–∏ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–æ–π–∫–∏ –ø–æ–ø–∞–¥—ë—Ç—Å—è –±–æ–ª—å—à–æ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –≤—ã–±–æ—Ä. –ò –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç—Ä-–ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ö–æ—Ä–æ—à–æ –≤–∏–¥–Ω–æ.

–ö–ª—é—á –∫ —Ä–µ—à–µ–Ω–∏—é ‚Äî –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–π –æ—à–∏–±–∫–∏.

–î–∞–≤–∞–π—Ç–µ –ø–æ–π–¥—ë–º —Å –∫–æ–Ω—Ü–∞ –º–∞—Å—Å–∏–≤–∞ –∏ –ø–æ–¥—É–º–∞–µ–º –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ.

–û–±—ã—á–Ω–æ –¥–ª—è –¥–ø –≤—ã–±–∏—Ä–∞—é—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –∑–∞–¥–∞—á–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Å—è—Ç –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –≤ –º–∞—Å—Å–∏–≤–µ –¥–ª–∏–Ω—ã `n`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å –±–∞–∑–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è (–º–∞—Å—Å–∏–≤ –¥–ª–∏–Ω—ã 1) –Ω—É–∂–Ω–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å `dp`.

–ü—É—Å—Ç—å `dp[i + 1]` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç _–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –Ω–∞—á–∏–Ω–∞—è —Å `i + 1`\-–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –∏ –¥–æ –∫–æ–Ω—Ü–∞ –º–∞—Å—Å–∏–≤–∞_. –ö–∞–∫ –≤—ã—á–∏—Å–ª–∏—Ç—å `dp[i]`?

> –ü–æ —Ñ–æ—Ä–º–µ –∑–∞–¥–∞—á–∞ –ø–æ—Ö–æ–∂–∞ –Ω–∞ [—Ä–∞–∑–º–µ–Ω –º–æ–Ω–µ—Ç](/posts/coin-change/)

    dp[i] = nums[i] + findMaxInRange(dp, i + 1, i + k)
    

–ü–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, —á—Ç–æ –∏ –±—ã–ª–æ, –Ω–æ –≤ –æ—Ç–ª–∏—á–∏–∏ –æ—Ç –Ω–∞–∏–≤–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ ‚Äî `dp` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å –∫–æ–Ω—Ü–∞ –∫ –Ω–∞—á–∞–ª—É, –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç ¬´—Ö–≤–æ—Å—Ç¬ª.

    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var maxResult = function(nums, k) {
      const n = nums.length;
      const dp = new Array(n);
      dp[n - 1] = nums[n - 1];
    
      for (let i = n - 2; i >= 0; i--) {
        // —Ç–µ–ø–µ—Ä—å –º–∞–∫—Å–∏–º—É–º –∏—â–µ–º –≤–Ω—É—Ç—Ä–∏ dp, –∞ –Ω–µ nums!
        const max = findMaxInRange(dp, i + 1, Math.min(i + k, n - 1))
        dp[i] = nums[i] + max;
      }
      return dp[0];
    };
    
    function findMaxInRange(nums, start, end) {
      let result = nums[start];
    
      for (let i = start + 1; i <= end; i++) {
        result = Math.max(result, nums[i]);
      }
      return result;
    }
    

![](/images/jump-game-vi--tle.jpg)

–ù–∞ –±–æ–ª—å—à–æ–º —Ç–µ—Å—Ç–µ –¥–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç TLE. –í—Å–µ-—Ç–∞–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π (`O(n^2)`), –∏ –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö `1 <= nums.length, k <= 10^5` ‚Äì –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–æ–ª–≥–æ.

–ì–¥–µ –ª–∏—à–Ω—è—è —Ä–∞–±–æ—Ç–∞?

–î–ª—è –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –±–µ–≥–∞—Ç—å —Ç—É–¥–∞-—Å—é–¥–∞ –ø–æ –≤—Å–µ–º—É _—Å–∫–æ–ª—å–∑—è—â–µ–º—É –æ–∫–Ω—É_ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∏—Å–∫–∞—Ç—å –º–∞–∫—Å–∏–º—É–º —Å–Ω–æ–≤–∞.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–ª–æ–≤–æ ¬´—Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ¬ª, —Å—Ä–∞–∑—É –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–∞ [–ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞ –≤ –æ–∫–Ω–µ](/posts/sliding-window-maximum/) ‚Äî —Ä–æ–≤–Ω–æ —Ç—É –∂–µ –∏–¥–µ—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –±—É—Ç—ã–ª–æ—á–Ω–æ–≥–æ –≥–æ—Ä–ª—ã—à–∫–∞.

    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var maxResult = function(nums, k) {
      const n = nums.length;
      const dp = new Array(n);
      // –≤ –æ—á–µ—Ä–µ–¥–∏ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã,
      // –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –º–∞–∫—Å–∏–º—É–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ dp
      const q = [n - 1];
      dp[n - 1] = nums[n - 1];
    
      for (let i = n - 2; i >= 0; i--) {
        // —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –≤ –æ–∫–Ω–µ,
        // –æ–∫–Ω–æ ‚Äî [i, i + k]
        while (q.length > 0 && q[0] > i + k) {
          q.shift();
        }
        // –≤ –Ω–∞—á–∞–ª–µ –æ—á–µ—Ä–µ–¥–∏ –≤—Å–µ–≥–¥–∞ –ª–µ–∂–∏—Ç –∏–Ω–¥–µ–∫—Å,
        // –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ dp
        dp[i] = nums[i] + dp[q[0]];
        // —É–±–∏—Ä–∞–µ–º —Å –∫–æ–Ω—Ü–∞ –æ—á–µ—Ä–µ–¥–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã,
        // –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Ç–æ—á–Ω–æ –Ω–µ —Å—Ç–∞–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º–∞–º–∏
        while (q.length > 0 && dp[q[q.length - 1]] < dp[i]) {
          q.pop();
        }
        // –∫–ª–∞–¥—ë–º –≤ –æ—á–µ—Ä–µ–¥—å –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ –æ–∫–Ω–∞
        q.push(i);
      }
      return dp[0];
    };
    

–ú—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —ç–ª–µ–º–µ–Ω—Ç –±–æ–ª–µ–µ –¥–≤—É—Ö —Ä–∞–∑ (–ø–æ–ª–æ–∂–∏—Ç—å –∏ —É–±—Ä–∞—Ç—å –∏–∑ –æ—á–µ—Ä–µ–¥–∏), —Å–æ–æ—Ç–≤–µ—Ç—Å–≤–µ–Ω–Ω–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –¥–æ `O(n)`.

![](/images/jump-game-vi--result.jpg)

–°–ª–µ–≥–∫–∞ –º–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å—Å—è, –µ—Å–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å ¬´—É—Å–ª–æ–≤–Ω–æ —á–µ—Å—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å¬ª ‚Äî —á—Ç–æ–±—ã —É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –Ω–∞—á–∞–ª–∞ –±—ã–ª–æ –∑–∞ `O(1)` (—Ç.–µ. –±–µ–∑ `shift`).

    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var maxResult = function(nums, k) {
      const n = nums.length;
      const dp = new Array(n);
      // –≤ –æ—á–µ—Ä–µ–¥–∏ –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã,
      // –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –º–∞–∫—Å–∏–º—É–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ dp
      const q = [n - 1];
      dp[n - 1] = nums[n - 1];
    + let start = 0;
    
      for (let i = n - 2; i >= 0; i--) {
        // —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –≤ –æ–∫–Ω–µ,
        // –æ–∫–Ω–æ ‚Äî [i, i + k]
    -   while (q.length > 0 && q[0] > i + k) {
    +   while (q.length > start && q[start] > i + k) {
    -     q.shift();
    +     start++;
        }
        // –≤ –Ω–∞—á–∞–ª–µ –æ—á–µ—Ä–µ–¥–∏ –≤—Å–µ–≥–¥–∞ –ª–µ–∂–∏—Ç –∏–Ω–¥–µ–∫—Å,
        // –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ dp
        dp[i] = nums[i] + dp[q[0]];
        // —É–±–∏—Ä–∞–µ–º —Å –∫–æ–Ω—Ü–∞ –æ—á–µ—Ä–µ–¥–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã,
        // –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Ç–æ—á–Ω–æ –Ω–µ —Å—Ç–∞–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º–∞–º–∏
    -   while (q.length > 0 && dp[q[q.length - 1]] < dp[i]) {
    +   while (q.length > start && dp[q[q.length - 1]] < dp[i]) {
          q.pop();
        }
        // –∫–ª–∞–¥—ë–º –≤ –æ—á–µ—Ä–µ–¥—å –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ –æ–∫–Ω–∞
        q.push(i);
      }
      return dp[0];
    };
    

![](/images/jump-game-vi--result2.jpg)

PS. –û–±—Å—É–¥–∏—Ç—å –º–æ–∂–Ω–æ –≤ [—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ](https://t.me/ctci_chat_ru) –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. Welcome! ü§ó

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [–º–æ–π —Ç–≤–∏—Ç–µ—Ä](https://twitter.com/vitkarpov) –∏–ª–∏ [–∫–∞–Ω–∞–ª –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ](https://t.me/coding_interviews), —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ä–∞–∑–±–æ—Ä–∞—Ö –∑–∞–¥–∞—á.